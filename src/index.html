<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Coin Job</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
</head>

<body>
    <div class="container" style="width: 650px;">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="text-center">Coin Job</h1>
                <hr />
                <br />
                <div id="loader">
                    <p class="text-center">Loading...</p>
                </div>
                <div id="content" style="display: none;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Title</th>
                                <th scope="col">Content</th>
                                <th scope="col">Deadline</th>
                                <th scope="col">Reward</th>
                                <th scope="col">Dontdisturb</th>
                                <th scope="col">Accepted</th>
                            </tr>
                        </thead>
                        <tbody id="result">
                        </tbody>
                    </table>
                    <hr />
                    <p id="accountAddress" class="text-center"></p>
                </div>
            </div>
        </div>
    </div>

    <button id="btn-publish">publish</button>

    <!-- Include JS files -->
    <script src="src/index.js"></script>
    <script>
        const app = App.default;

        $(function () {
            $(window).on("load", function () {
                console.log("Window 로드 완료")
                app.init();
            });
        });

        document.getElementById("btn-publish").addEventListener("click", async function () {
            const title = "Hello";
            const jobContent = "I want you.";
            const dontdisturb = web3.utils.toWei("1", "ether");
            const deadline = Date.now();
            const reward = Math.random() * 100 % 2 + 0.5
            console.log("Publish job", title, jobContent, dontdisturb, deadline, reward);
            let job = await app.publishJob(title, jobContent, dontdisturb, deadline, reward);
        });

        async function renderAllJob(pageId = -1, perPage = 10) {
            let jobList = await app.allJob(pageId, perPage);
            console.log(jobList);
            for (let i = 0; i < jobList.length; i++) {
                document.getElementById("result").append(jobList[i]);
            }
        }
    </script>

</body>

</html>